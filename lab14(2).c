#include <stdio.h>
#include <setjmp.h>  // Для работы с нелокальными переходами (setjmp/longjmp)

jmp_buf env;  // Буфер для сохранения состояния программы

// Рекурсивная функция вычисления суммы чисел Фибоначчи
// n - сколько чисел осталось обработать
// a и b - текущие числа Фибоначчи
// sum - указатель на переменную с суммой
void fib_sum(int n, unsigned long long a, unsigned long long b, unsigned long long *sum) {
    if (n <= 0) {  // Условие выхода из рекурсии
        longjmp(env, 1);  // Выходим из всех вложенных вызовов сразу
    }
    
    *sum += a;  // Добавляем текущее число к сумме
    fib_sum(n - 1, b, a + b, sum);  // Рекурсивный вызов для следующего числа
}

int main() {
    int n;  // Количество чисел для суммирования
    unsigned long long sum = 0;  // Переменная для хранения суммы
    
    printf("Введите количество чисел Фибоначчи для суммирования: ");
    scanf("%d", &n);  // Чтение ввода пользователя
    
    // Устанавливаем точку возврата
    if (setjmp(env)) {
        // Сюда попадаем после longjmp
        printf("Сумма первых %d чисел Фибоначчи: %llu\n", n, sum);
        return 0;
    }
    
    // Запускаем вычисления
    fib_sum(n, 1, 1, &sum);  // Начинаем с чисел 1 и 1
    
    return 0;
