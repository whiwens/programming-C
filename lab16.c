#include <stdio.h>


//  Функция bl (bit count long) - подсчёт установленных битов в long
//  n - число типа long для анализа
 // p - текущая позиция бита (0..63)
 // Возвращает количество установленных битов
 
int bl(long n, int p) {
    // Если не дошли до 64-го бита (0..63)
    return p < 64 ? 
           // Проверяем бит на позиции p и добавляем результат рекурсивного вызова
           ((n >> p) & 1) + bl(n, p + 1) : 
           // Базовый случай рекурсии - вышли за границы
           0;
}


 // Функция bd (bit count double) - подсчёт установленных битов в double
 // x - число типа double для анализа
  //p - текущий байт (0..7)
 // b - текущий бит в байте (0..7)
 // Возвращает количество установленных битов
 
int bd(double x, int p, int b) {
    // Union для доступа к битовому представлению double
    union { 
        double d;         // Как double
        unsigned long l;  // Как unsigned long для удобства доступа к битам
    } u = {x};  // Инициализируем переданным значением
    
    // Если не дошли до 8-го байта (0..7)
    return p < 8 ? 
           // Если не дошли до 8-го бита в байте (0..7)
           b < 8 ? 
           // Проверяем бит на позиции (p*8 + b) и добавляем рекурсивный вызов
           ((u.l >> (p*8 + b)) & 1) + bd(x, p, b + 1) : 
           // Переходим к следующему байту
           bd(x, p + 1, 0) : 
           // Базовый случай рекурсии - вышли за границы
           0;
}

int main() {
    long l;    // Переменная для числа типа long
    double d;  // Переменная для числа типа double
    
    printf("Введите long и double: ");
    scanf("%ld %lf", &l, &d);
    
    
    printf("Битов в long: %d\nБитов в double: %d\n", bl(l, 0), bd(d, 0, 0));
    
    return 0;
}
